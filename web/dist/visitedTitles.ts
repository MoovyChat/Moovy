import{e as v,r as s,aM as y,a as t,j as p,F as H,C as P,i as S}from"./index.js";import{H as x}from"./Helmet.ts";import T from"./notFound.ts";import{T as E}from"./titleListTemplate.ts";import{u as V}from"./isAuthUser.ts";import"./moovy-white.ts";import"./styled-components.browser.esm.ts";import"./emptyPage.ts";import"./CSSTransition.ts";import"./inheritsLoose.ts";import"./favorites.styles.ts";import"./loading.ts";import"./loading.styles.ts";import"./movieCard.ts";import"./image.ts";import"./movieCard.styles.ts";import"./movieInfo.ts";import"./index.esm.ts";import"./iconBase.ts";import"./helpers.ts";import"./hooks.ts";import"./index.ts";const J=()=>{const{id:i}=v();V();const[o,n]=s.useState(1),[c,l]=s.useState([]),[u,d]=s.useState(1),[e]=y({variables:{page:o,uid:i,limit:6},pause:S()});return s.useEffect(()=>{const{data:a,error:m,fetching:f}=e;if(m&&console.log(m),!f&&a){const r=a.getUserViewHistory;if(r){const g=r.visited;l(()=>g);const h=r.lastPage;d(()=>h)}}},[e]),e.error?t(T,{}):p(H,{children:[p(x,{children:[t("title",{children:`${i}: History`}),t("meta",{name:"description",content:`${i}: History`}),t("link",{rel:"canonical",href:`${P}/activity/${i}/history`})]}),t(E,{page:o,setPage:n,fetching:e.fetching,lastPage:u,movieStatsData:c})]})};export{J as default};
