import{w as f,u as v,r as d,n as S,ay as y,i as I,a as U,t as w}from"./index.js";import{C as x}from"./cardTemplate.ts";import{a as T}from"./hooks.ts";const _=({comment:e,isMain:C})=>{const l=e.movieId,p=v(),u=T(t=>t.user),[i,a]=d.useState(!1),[n,m]=d.useState(e.likesCount),[,L]=S(),[c]=y({variables:{uid:u.id,cid:e.id},pause:I()});return d.useEffect(()=>{const{error:t,data:o,fetching:s}=c;if(!s&&o){const r=o.getIsUserLikedComment.isLiked;a(r)}},[c]),U(x,{type:"comment",isMain:C,updateLike:async t=>{var k;t.stopPropagation(),a(!i),m(i?n-1:n+1);const o=await L({uid:u.id,cid:e.id,like:!i,mid:l}),{data:s,error:g}=o,r=(k=s==null?void 0:s.setCommentLike)==null?void 0:k.likeStatus.like;a(r)},likeCount:n,like:i,goToComment:t=>{t.stopPropagation(),p(`/comment/${e.id}`)},comment:e})},$=f(w)(_);export{$ as C};
