import{w as S,u as y,a as I,r,b as U,c as h,i as g,j as c,d as Q,e as _,L as b,F as w}from"./index-c87fafe8.js";import{C as x}from"./cardTemplate-c6a17f38.js";import"./helpers-844ce213.js";import"./profilePic-3b95e47d.js";const E=({comment:e,isMain:m})=>{const d=e.movieId,o=y(),C=I(s=>s.user),[t,i]=r.useState(!1),[a,k]=r.useState(e.likesCount),[,L]=U(),[p]=h({variables:{uid:C.id,cid:e.id},pause:g()});return r.useEffect(()=>{const{error:s,data:u,fetching:n}=p;if(!n&&u){const l=u.getIsUserLikedComment.isLiked;i(l)}},[p]),c(x,{type:"comment",isMain:m,updateLike:async s=>{var f;s.stopPropagation(),i(!t),k(t?a-1:a+1);const u=await L({uid:C.id,cid:e.id,like:!t,mid:d}),{data:n,error:v}=u,l=(f=n==null?void 0:n.setCommentLike)==null?void 0:f.likeStatus.like;i(l)},likeCount:a,like:t,goToComment:s=>{s.stopPropagation(),o(`/comment/${e.id}`)},comment:e})},F=S(Q)(E),A=({id:e})=>{const[m,d]=r.useState(null),[o]=_({variables:{cid:e},pause:g()});return r.useEffect(()=>{const{error:C,data:t,fetching:i}=o;if(!i&&t){const a=t.getComment;d(()=>a)}},[o]),o.fetching?c(b,{}):m?c(F,{comment:m}):c(w,{})};export{A as default};
